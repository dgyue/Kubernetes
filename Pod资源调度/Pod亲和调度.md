# Pod亲和调度

​	出于高效通信等需求，偶尔需要把一些Pod对象组织在相近的位置，例如应用程序的Pod及其后端提供数据服务的Pod等，我们可以认为这是一类具有亲和关系的Pod对象。偶尔，出于安全或分布式容灾等原因，也会需要把一些Pod对象与其所运行的位置隔离开来，例如在IDC中的区域运行某应用的单个代理Pod对象等，我们可把这类Pod对象间的关系称为反亲和。

​	当然，我们也能够通过Pod与节点的亲和关系来变相完成Pod对象间的亲和或反亲和特性，但这要求我们必须明确指定Pod可运行的节点标签，显然这并非较优的选择。理想的实现方式是允许调度器把第一个Pod放置在任何位置，而后与其有着亲和或反亲和关系的其他Pod据此动态完成位置编排，这就是Pod亲和调度与反亲和调度的功用。Pod间的亲和关系也存在强制亲和及首选亲和的区别，它们表示的约束意义同节点亲和相似。

​	Pod间的亲和及反亲和关系主要由调度插件InterPodAffinity来支撑，它既要负责节点过滤，也要完成节点的优先级排序。而经典调度策略则使用内置的MatchInterPodAffinity预选策略和terPodAffinityPriority优选函数进行各节点的优先级评估。

